#+Title: Auth Server Rest Endpoints
#+Author: Joel DSouza
#+Date: April 13, 2025
#+Email: joel@tixlys.com


* Introduction
this document contains all http endpoints specified in auth server, for testing purposes.

** initiate register
*** with nobody
#+begin_src restclient no content type
POST http://localhost:3000/initiate-register
Content-Type: application/json
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "status": "error",
  "message": "Failed to parse the request body as JSON: EOF while parsing a value at line 1 column 0",
  "code": 400
}
// POST http://localhost:3000/initiate-register
// HTTP/1.1 400 Bad Request
// content-type: application/json
// content-length: 128
// date: Sun, 04 May 2025 12:34:48 GMT
// Request duration: 0.001304s
#+END_SRC

#+RESULTS:

*** with no content-type
#+begin_src restclient no content type
POST http://localhost:3000/initiate-register

{ 'email': 'joel@tixlys.com' }
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "status": "error",
  "message": "Expected request with `Content-Type: application/json`",
  "code": 415
}
// POST http://localhost:3000/initiate-register
// HTTP/1.1 415 Unsupported Media Type
// content-type: application/json
// content-length: 96
// date: Sun, 04 May 2025 12:34:48 GMT
// Request duration: 0.002057s
#+END_SRC

#+RESULTS:

*** invalid json
#+begin_src restclient
POST http://localhost:3000/initiate-register
Content-Type: application/json

{ 'email': 'joel@tixlys.com' }
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "status": "error",
  "message": "Failed to parse the request body as JSON: key must be a string at line 1 column 3",
  "code": 400
}
// POST http://localhost:3000/initiate-register
// HTTP/1.1 400 Bad Request
// content-type: application/json
// content-length: 123
// date: Sun, 04 May 2025 12:34:48 GMT
// Request duration: 0.001129s
#+END_SRC

#+RESULTS:

*** invalid email add
#+begin_src restclient
POST http://localhost:3000/initiate-register
Content-Type: application/json

{ "email": "joeltixlys.com" }
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "status": "error",
  "message": "email: Invalid format",
  "code": 400
}
// POST http://localhost:3000/initiate-register
// HTTP/1.1 400 Bad Request
// content-type: application/json
// content-length: 63
// date: Sun, 04 May 2025 12:34:48 GMT
// Request duration: 0.000924s
#+END_SRC

#+RESULTS:

*** valid email address
#+begin_src restclient
POST http://localhost:3000/initiate-register
Content-Type: application/json

{ "email": "joel@tixlys.com" }
#+end_src

#+RESULTS:
#+BEGIN_SRC js
// POST http://localhost:3000/initiate-register
// HTTP/1.1 202 Accepted
// content-length: 0
// date: Sun, 04 May 2025 12:34:50 GMT
// Request duration: 0.002678s
#+END_SRC

#+RESULTS:
: undefined
